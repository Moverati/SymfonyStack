<?xml version="1.0" encoding="UTF-8" ?>
<srv:container xmlns:srv="http://symfony.com/schema/dic/services"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns="http://symfony.com/schema/dic/security"
               xsi:schemaLocation="http://symfony.com/schema/dic/services
                                   http://symfony.com/schema/dic/services/services-1.0.xsd"
>
    <srv:parameters>
        <srv:parameter key="security.acl.dbal.class_table_name">AclClass</srv:parameter>
        <srv:parameter key="security.acl.dbal.entry_table_name">AclEntry</srv:parameter>
        <srv:parameter key="security.acl.dbal.oid_table_name">AclObjectIdentity</srv:parameter>
        <srv:parameter key="security.acl.dbal.oid_ancestors_table_name">AclObjectIdentityAncestor</srv:parameter>
        <srv:parameter key="security.acl.dbal.sid_table_name">AclSecurityIdentity</srv:parameter>
    </srv:parameters>

    <srv:services>
            <!-- Bugfix -->
            <srv:service id="security.acl.cache.doctrine_cache_impl" alias="security.acl.cache.doctrine.cache_impl" public="false" />
    </srv:services>
    <!-- @see http://trac.symfony-project.org/browser/branches/2.0/src/Symfony/Bundle/SecurityBundle/Tests/DependencyInjection/Fixtures/xml/container1.xml?rev=32184 -->
    <config>
        <encoder class="Symfony\Component\Security\Core\User\User" algorithm="plaintext" />

        <role id="ROLE_ADMIN">ROLE_USER</role>
        <role id="ROLE_SUPER_ADMIN">ROLE_USER,ROLE_ADMIN,ROLE_ALLOWED_TO_SWITCH</role>

        <provider name="in_memory">
            <user name="user" password="userpass" roles="ROLE_USER" />
            <user name="admin" password="adminpass" roles="ROLE_ADMIN" />
        </provider>

        <firewall name="profiler" pattern="/_profiler.*"        security="false" />
        <firewall name="wdt" pattern="/_wdt.*"             security="false" />
        <firewall name="login" pattern="/demo/secured/login" security="false" />
        <firewall name="secured_area" pattern="/demo/secured/.*">
            <form-login check_path="/demo/secured/login_check" login_path="/demo/secured/login" />
            <logout path="/demo/secured/logout" target="/demo/" />
        </firewall>


        <access-control>
            <rule path="/login" role="IS_AUTHENTICATED_ANONYMOUSLY" />
        </access-control>

        <acl>
            <connection>default</connection>
            <cache>doctrine</cache>
        </acl>
    </config>    
</srv:container>